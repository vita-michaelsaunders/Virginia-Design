try {
importClass(com.terminalfour.publish.utils.BrokerUtils);

var blockClass = BrokerUtils.processT4Tags(dbStatement, publishCache, section, content, language, isPreview, '<t4 type="content" name="Color" output="normal" display_field="value" />');
var size = '',
    row = '',
    bylineClass = '';
if (content.get('Size').size > 0) {
  size = 'va-block--'+BrokerUtils.processT4Tags(dbStatement, publishCache, section, content, language, isPreview, '<t4 type="content" name="Size" output="normal" display_field="value" />');
}
if (content.get('Horizontal').size > 0) {
  row = 'va-block--row';
}

var blockAlignment= "";


if (String(content.get('Alignment').publish()) !== "") {
  blockAlignment = String(content.get('Alignment').publish());
}

document.write('<div class="grid-col-auto">');

if (content.get('Link').size > 0) {
  blockClass = blockClass+' va-block__link';
  document.write(BrokerUtils.processT4Tags(dbStatement, publishCache, section, content, language, isPreview, '<a target="_blank" rel="noopener" href="<t4 type="content" name="Link" output="normal" modifiers="striptags,htmlentities" />" '));
  document.write('class="'+blockClass+'">');
} else {
	blockClass = blockClass+' va-block__text';
  document.write('<div class="'+blockClass+'">');
}
if (content.get('Image').size > 0) {
  document.write('<div class="va-block__media">');
  document.write(BrokerUtils.processT4Tags(dbStatement, publishCache, section, content, language, isPreview, '<img class="va-block__img js-load-image" src="<t4 type="content" name="Image" output="normal" formatter="image/pathResizeSmall" />" data-src="<t4 type="content" name="Image" output="normal" formatter="path/*" />" data-srcset="<t4 type="content" name="Image" output="normal" formatter="path/*" /> 720w, <t4 type="content" name="Image" output="normal" formatter="image/pathResizeMedium" /> 256w" sizes="(max-width: 756) 100vw, 756px" alt="<t4 type="content" name="Image" output="normal" formatter="description/*" />">'));
  document.write('</div>');
  document.write('<div class="va-block__text">');
}

if (content.get('Byline').size > 0 && content.get('Image').size > 0) {
  document.write('<p class="va-block__byline '+bylineClass+'">');
  document.write(BrokerUtils.processT4Tags(dbStatement, publishCache, section, content, language, isPreview, '<t4 type="content" name="Byline" output="normal" modifiers="striptags,htmlentities" />'));
  document.write('</p>');
}
  
//Heading  
if (content.get('Heading').size > 0 || content.get('Subheading').size > 0) {
  document.write(BrokerUtils.processT4Tags(dbStatement, publishCache, section, content, language, isPreview, '<h3 class="va-block__heading <t4 type="content" name="Change Heading Size" output="normal" display_field="value" />">'));
    if (content.get('Link').size > 0) {
    document.write(BrokerUtils.processT4Tags(dbStatement, publishCache, section, content, language, isPreview, '<t4 type="content" name="Heading" output="selective-output" modifiers="striptags,htmlentities" format="<span class=&quot;va-linkArrow va-icon va-icon--arrow-ext&quot;>$value</span>" />'));
  } else {
    document.write(BrokerUtils.processT4Tags(dbStatement, publishCache, section, content, language, isPreview, '<t4 type="content" name="Heading" output="selective-output" modifiers="striptags,htmlentities" format="<span>$value</span>" />'));
  }
  document.write(BrokerUtils.processT4Tags(dbStatement, publishCache, section, content, language, isPreview, '<t4 type="content" name="Subheading" output="selective-output" modifiers="striptags,htmlentities" format="<span class=&quot;va-heading--sub&quot;>$value</span>" />'));
  document.write('</h3>');
}
  
//Byline  
if (content.get('Byline').size > 0 && content.get('Image').size <= 0) {
  document.write('<p class="va-block__byline '+bylineClass+'">');
  document.write(BrokerUtils.processT4Tags(dbStatement, publishCache, section, content, language, isPreview, '<t4 type="content" name="Byline" output="normal" modifiers="striptags,htmlentities" />'));
  document.write('</p>');
}
document.write(BrokerUtils.processT4Tags(dbStatement, publishCache, section, content, language, isPreview, '<t4 type="content" name="Description" output="selective-output" modifiers="medialibrary,nav_sections" format="<div class=&quot;va-block__description&quot;>$value</div>" />'));
if (content.get('Image').size > 0) {
  document.write('</div>');
}
if (content.get('Link').size > 0) {
  document.write('</a>');
} else {
  document.write('</div>');
}
document.write('</div>');
} catch(err){
  document.write(err);
}